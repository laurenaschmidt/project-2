{% extends 'trading/base.html' %}
{% load static %}
{% block content %}
<div class="profile-container">
<div class="left-column">
  {% if user_profile.profile_picture %}
    <img class="profile-pic" src="{{ user_profile.profile_picture.url }}" alt="Profile Picture">
  {% else %}
    <img class="profile-pic" src="{% static 'images/default_profile.png' %}" alt="Default Profile Picture">
  {% endif %}

    <h1 class="username">{{ request.user.username|upper }}'S PROFILE</h1>
    <p class="bio"><strong>Bio:</strong> {{ user_profile.bio }}</p>

    {% if user_profile.favorite_pokemon %}
      <p class="favorite"><strong>Favorite Pokémon:</strong> {{ user_profile.favorite_pokemon.name }}</p>
      {% if user_profile.favorite_pokemon.image %}
        <img class="fav-pokemon-img" src="{{ user_profile.favorite_pokemon.image }}" alt="{{ user_profile.favorite_pokemon.name }}">
      {% endif %}
      <p class="abilities">Ability: {{ user_profile.favorite_pokemon.abilities }}</p>
    {% else %}
      <p>You haven't selected a favorite Pokémon yet.</p>
    {% endif %}
  </div>

  <div class="right-column">
    <h2 class="collection-header">MY COLLECTION</h2>
    <div class="pokemon-grid">
      {% for pokemon in user_profile.owned_pokemon.all %}
        <div class="pokemon-box">
          {% if pokemon.image %}
            <img src="{{ pokemon.image }}" alt="{{ pokemon.name }}">
          {% endif %}
          <p>{{ pokemon.name }}</p>
        </div>
      {% endfor %}
      <div class="pokemon-box view-more">
        <p>VIEW MORE</p>
      </div>
      <p><strong>Total Pokémon Owned:</strong> {{ total_owned }}</p>
      <p><strong>Unique Types Owned:</strong> {{ unique_types }}</p>
      <p><strong>Most Common Type:</strong> {{ most_common_type }}</p>
      <ul>
      {% for type, percentage in type_percentages.items %}
      <li>{{ type }}: {{ percentage|floatformat:1 }}%</li>
      {% endfor %}
</ul>
    </div>
  </div>
</div>

<a class="edit-profile" href="{% url 'trading:update_profile' %}">Edit Profile</a>
{% endblock %}